import random
import os

class –ì—Ä–∞:
    def __init__(self, —Ä–æ–∑–º—ñ—Ä=20):
        self.—Ä–æ–∑–º—ñ—Ä = —Ä–æ–∑–º—ñ—Ä
        self.–ø–æ–ª–µ = [['.' for _ in range(—Ä–æ–∑–º—ñ—Ä)] for _ in range(—Ä–æ–∑–º—ñ—Ä)]
        self.–∫–æ—Å–º—ñ—á–Ω–∏–π_–∫–æ—Ä–∞–±–µ–ª—å = –ö–æ—Ä–∞–±–µ–ª—å(self)
        self.–ø–ª–∞–Ω–µ—Ç–∞ = –ü–ª–∞–Ω–µ—Ç–∞(self)
        self.–ø–µ—Ä–µ—à–∫–æ–¥–∏ = []  # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–æ—Ä–æ–∂–Ω—å–æ–≥–æ —Å–ø–∏—Å–∫—É –ø–µ—Ä–µ—à–∫–æ–¥
        self.–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏_–ø–µ—Ä–µ—à–∫–æ–¥–∏()
        self.–≥—Ä–∞—î = True

    def –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏_–ø–µ—Ä–µ—à–∫–æ–¥–∏(self):
        self.–ø–µ—Ä–µ—à–∫–æ–¥–∏ = [–ü–µ—Ä–µ—à–∫–æ–¥–∞(self) for _ in range(random.randint(2, 4))]

    def –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏(self):
        os.system('cls' if os.name == 'nt' else 'clear')  # –û—á–∏—â–µ–Ω–Ω—è –µ–∫—Ä–∞–Ω–∞ –ø–µ—Ä–µ–¥ –∫–æ–∂–Ω–∏–º —Ö–æ–¥–æ–º
        for —Ä—è–¥–æ–∫ in self.–ø–æ–ª–µ:
            print(" ".join(—Ä—è–¥–æ–∫))

    def –æ–Ω–æ–≤–∏—Ç–∏_–ø–æ–ª–µ(self):
        self.–ø–æ–ª–µ = [['.' for _ in range(self.—Ä–æ–∑–º—ñ—Ä)] for _ in range(self.—Ä–æ–∑–º—ñ—Ä)]
        
        self.–ø–ª–∞–Ω–µ—Ç–∞.—Ä–æ–∑–º—ñ—Å—Ç–∏—Ç–∏_–Ω–∞_–ø–æ–ª—ñ()
        for –ø–µ—Ä–µ—à–∫–æ–¥–∞ in self.–ø–µ—Ä–µ—à–∫–æ–¥–∏:
            –ø–µ—Ä–µ—à–∫–æ–¥–∞.—Ä–æ–∑–º—ñ—Å—Ç–∏—Ç–∏_–Ω–∞_–ø–æ–ª—ñ()
        self.–∫–æ—Å–º—ñ—á–Ω–∏–π_–∫–æ—Ä–∞–±–µ–ª—å.—Ä–æ–∑–º—ñ—Å—Ç–∏—Ç–∏_–Ω–∞_–ø–æ–ª—ñ()

    def –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏_–∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è(self):
        x_–∫–æ—Ä–∞–±–ª—è, y_–∫–æ—Ä–∞–±–ª—è = self.–∫–æ—Å–º—ñ—á–Ω–∏–π_–∫–æ—Ä–∞–±–µ–ª—å.–ø–æ–∑–∏—Ü—ñ—è
        
        # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è –∑ –ø–µ—Ä–µ—à–∫–æ–¥–∞–º–∏
        for –ø–µ—Ä–µ—à–∫–æ–¥–∞ in self.–ø–µ—Ä–µ—à–∫–æ–¥–∏:
            if –ø–µ—Ä–µ—à–∫–æ–¥–∞.–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏_–∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è(x_–∫–æ—Ä–∞–±–ª—è, y_–∫–æ—Ä–∞–±–ª—è):
                print("\nüö® –ö–æ—Ä–∞–±–µ–ª—å —Ä–æ–∑–±–∏–≤—Å—è –æ–± –ø–µ—Ä–µ—à–∫–æ–¥—É! –ì—Ä–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–∞. üöÄüí•")
                self.–≥—Ä–∞—î = False
                return
        
        # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –¥–æ—Å—è–≥–Ω—É—Ç–æ –ø–ª–∞–Ω–µ—Ç–∏
        if self.–ø–ª–∞–Ω–µ—Ç–∞.–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏_–ø—Ä–∏–∑–µ–º–ª–µ–Ω–Ω—è(x_–∫–æ—Ä–∞–±–ª—è, y_–∫–æ—Ä–∞–±–ª—è):
            print("\nüéâ –í—ñ—Ç–∞—î–º–æ! –í–∏ —É—Å–ø—ñ—à–Ω–æ –ø–æ—Å–∞–¥–∏–ª–∏ –∫–æ—Ä–∞–±–µ–ª—å –Ω–∞ –ø–ª–∞–Ω–µ—Ç—É! üåçüöÄ")
            self.–≥—Ä–∞—î = False

    def –∑–∞–ø—É—Å—Ç–∏—Ç–∏(self):
        while self.–≥—Ä–∞—î:
            self.–æ–Ω–æ–≤–∏—Ç–∏_–ø–æ–ª–µ()
            self.–≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏()
            self.–∫–æ—Å–º—ñ—á–Ω–∏–π_–∫–æ—Ä–∞–±–µ–ª—å.—Ä—É—Ö–∞—Ç–∏—Å—è()
            self.–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏_–∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è()
        print("–ì—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")

class –ö–æ—Ä–∞–±–µ–ª—å:
    def __init__(self, –≥—Ä–∞):
        self.–≥—Ä–∞ = –≥—Ä–∞
        self.–ø–æ–∑–∏—Ü—ñ—è = (random.randint(0, –≥—Ä–∞.—Ä–æ–∑–º—ñ—Ä - 1), random.randint(0, –≥—Ä–∞.—Ä–æ–∑–º—ñ—Ä - 1))

    def —Ä–æ–∑–º—ñ—Å—Ç–∏—Ç–∏_–Ω–∞_–ø–æ–ª—ñ(self):
        x, y = self.–ø–æ–∑–∏—Ü—ñ—è
        self.–≥—Ä–∞.–ø–æ–ª–µ[y][x] = 'S'

    def —Ä—É—Ö–∞—Ç–∏—Å—è(self):
        try:
            x, y = map(int, input("\n–í–≤–µ–¥—ñ—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –¥–ª—è —Ä—É—Ö—É (x y): ").split())
            if 0 <= x < self.–≥—Ä–∞.—Ä–æ–∑–º—ñ—Ä and 0 <= y < self.–≥—Ä–∞.—Ä–æ–∑–º—ñ—Ä:
                self.–ø–æ–∑–∏—Ü—ñ—è = (x, y)
            else:
                print("‚ùå –ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π —Ä—É—Ö! –í–≤–µ–¥—ñ—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –≤ –º–µ–∂–∞—Ö –ø–æ–ª—è.")
        except ValueError:
            print("‚ùå –ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π –≤–≤—ñ–¥! –í–≤–µ–¥—ñ—Ç—å –¥–≤–∞ —á–∏—Å–ª–∞.")

class –ü–ª–∞–Ω–µ—Ç–∞:
    def __init__(self, –≥—Ä–∞):
        self.–≥—Ä–∞ = –≥—Ä–∞
        self.—Ä–æ–∑–º—ñ—Ä = random.randint(4, 5)
        self.x = random.randint(0, –≥—Ä–∞.—Ä–æ–∑–º—ñ—Ä - self.—Ä–æ–∑–º—ñ—Ä)
        self.y = random.randint(0, –≥—Ä–∞.—Ä–æ–∑–º—ñ—Ä - self.—Ä–æ–∑–º—ñ—Ä)

    def —Ä–æ–∑–º—ñ—Å—Ç–∏—Ç–∏_–Ω–∞_–ø–æ–ª—ñ(self):
        for i in range(self.—Ä–æ–∑–º—ñ—Ä):
            for j in range(self.—Ä–æ–∑–º—ñ—Ä):
                self.–≥—Ä–∞.–ø–æ–ª–µ[self.y + i][self.x + j] = 'P'

    def –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏_–ø—Ä–∏–∑–µ–º–ª–µ–Ω–Ω—è(self, x, y):
        return self.x - 1 <= x <= self.x + self.—Ä–æ–∑–º—ñ—Ä and self.y - 1 <= y <= self.y + self.—Ä–æ–∑–º—ñ—Ä

class –ü–µ—Ä–µ—à–∫–æ–¥–∞:
    def __init__(self, –≥—Ä–∞):
        self.–≥—Ä–∞ = –≥—Ä–∞
        self.—Ä–æ–∑–º—ñ—Ä = random.randint(1, 3)
        while True:
            self.x = random.randint(0, –≥—Ä–∞.—Ä–æ–∑–º—ñ—Ä - self.—Ä–æ–∑–º—ñ—Ä)
            self.y = random.randint(0, –≥—Ä–∞.—Ä–æ–∑–º—ñ—Ä - self.—Ä–æ–∑–º—ñ—Ä)
            if not self._–∑–∞–Ω–∞–¥—Ç–æ_–±–ª–∏–∑—å–∫–æ_–¥–æ_—ñ–Ω—à–∏—Ö():
                break

    def _–∑–∞–Ω–∞–¥—Ç–æ_–±–ª–∏–∑—å–∫–æ_–¥–æ_—ñ–Ω—à–∏—Ö(self):
        for –ø–µ—Ä–µ—à–∫–æ–¥–∞ in self.–≥—Ä–∞.–ø–µ—Ä–µ—à–∫–æ–¥–∏:
            if abs(self.x - –ø–µ—Ä–µ—à–∫–æ–¥–∞.x) < 3 and abs(self.y - –ø–µ—Ä–µ—à–∫–æ–¥–∞.y) < 3:
                return True
        return False

    def —Ä–æ–∑–º—ñ—Å—Ç–∏—Ç–∏_–Ω–∞_–ø–æ–ª—ñ(self):
        for i in range(self.—Ä–æ–∑–º—ñ—Ä):
            for j in range(self.—Ä–æ–∑–º—ñ—Ä):
                self.–≥—Ä–∞.–ø–æ–ª–µ[self.y + i][self.x + j] = 'X'

    def –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏_–∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è(self, x, y):
        return self.x - 1 <= x <= self.x + self.—Ä–æ–∑–º—ñ—Ä and self.y - 1 <= y <= self.y + self.—Ä–æ–∑–º—ñ—Ä

if __name__ == "__main__":
    –≥—Ä–∞ = –ì—Ä–∞()
    –≥—Ä–∞.–∑–∞–ø—É—Å—Ç–∏—Ç–∏()
